.todos
- split up application (to domains & to read / write side)
- add snapshots for replaying events
 * snapshot map for aggregate -> UUID
 * reference last event version from snapshot
- remove final's

.done
- make events persistent
- make post order return UUID
- implement read side (read order status)
- try to find declarative json mapping that honors polymorphism
- add "real" event store -> kafka
 * implement producer
 * (de)serializer
- separate events from different bounded contexts

>>>>>>>>>>>>>>>>>>>>

=== Orders

CoffeeOrder (aggregate)
-> OrderPlaced
-> OrderAccepted
-> OrderCancelled
-> OrderStarted
-> OrderFinished
-> OrderDelivered

OrderService (commands -> events)
+ place order -> OrderPlaced
- accept order -> OrderAccepted
- cancel order -> OrderCancelled
- start order -> OrderStarted
- finish order -> OrderFinished
- deliver order -> OrderDelivered

EventHandler (events -> commands)
- OrderBeansValidated -> accept order
- OrderFailedBeansNotAvailable -> cancel order
- CoffeeBrewStarted -> start order
- CoffeeBrewFinished -> finish order
- CoffeeDelivered -> deliver order

.events
- OrderPlaced
- OrderAccepted
- OrderCancelled

=== Barista

BaristaService (commands -> events)
- make coffee -> CoffeeBrewStarted
o check coffee -> _none_, CoffeeBrewFinished
o wait for customer -> _none_, CoffeeDelivered

EventHandler (events -> commands)
- OrderAccepted -> make coffee

.events
- CoffeeBrewStarted
- CoffeeBrewFinished
- CoffeeDelivered

=== Beans

BeanStorage (aggregate)
-> BeansFetched
-> BeansStored

BeanService
+ store beans -> BeansStored
- validate beans -> OrderBeansValidated | OrderFailedBeansNotAvailable
- fetch beans -> BeansFetched

EventHandler
- OrderPlaced -> validate beans
- CoffeeBrewStarted -> fetch beans

.events
- OrderBeansValidated
- OrderFailedBeansNotAvailable
- BeansFetched
- BeansStored
